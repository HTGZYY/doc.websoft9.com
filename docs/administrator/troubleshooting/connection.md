---
sidebar_position: 2
slug: /troubleshooting/connection
---

# 连接障碍故障

## 特征

网络不通、访问权限不足、账号错误、黑名单问题、连接对象不对、进程互斥等特征下，都是技术组件的连接问题。  

连接的双方包括：  

* 应用 连接 数据库
* 客户端 连接 服务端
* 浏览器 访问 网站

## 故障

#### SFTP 无法登录 Linux？

检查账号和密码是正确，请保证 **服务器安全组** 的22端口是开启的

#### 无法连接 Windows 远程桌面？

检查账号和密码是正确，请保证 **服务器安全组** 3389 端口是开启的，下图是排查方法  
![](https://libs.websoft9.com/Websoft9/DocsPicture/zh/aliyun/aliyun-guzhangpaichu.png)

#### *http://服务器公网IP* 无法打开初始化界面？

最常见的原因如下：

* 服务器[安全组**80** 端口](./security#group)没有开启
* 你所安装的镜像不支持此类访问
* 安装的不是目标镜像
* 你的服务器网络故障
* 产品本身的故障导致
* 其他

不管哪种原因，一旦无法访问，请第一时刻联系我们：[技术支持](../helpdesk)

#### 已替换默认目录，仍然出现默认演示页面？

缓存问题导致，请清空浏览器缓存或换一个浏览器测试

#### 域名解析迟迟没有生效？

解析生效之后，本地访问可能由于缓存问题导致仍然没有生效，请清空浏览器缓存和DNS缓存

#### 连接 SFTP，出现 Disconnected...publickey

错误原因：服务器初始化的适合，启用的是密钥对登录方式（密码登录会不开启）    
解决方案：设置 WinSCP 为秘钥对登录 或 云控制台更改登录凭证方式

#### 容器应用无法远程访问？

导致这个问题的可能原因有三点：

1. 端口没有正确映射到宿主机
2. 容器内部拒绝远程访问
3. 服务器安全组对应的端口没有开放

#### Windows 容器无法访问外网？

在使用阿里云官方提供的 Windows 2019 数据中心版（含 Container） 的时候发现网络不通，后面采用如下的办法解决了此问题：

1. 远程桌面登录到服务器
2. 到【网络管理】中禁用本地网络，此时远程桌面断开
3. 到阿里云 VNC 连接中重新远程到服务器，重新开启被禁用的本地网络

以上解决办法的根本原因未知。 

#### 同一IP反复刷新页面，服务器403错误？

mod_evasive是Apache防御攻击的模块，有助于防止DoS、DDoS以及对Apache服务器的暴力攻击。它可以在攻击期间提供规避行动，并通过电子邮件和系统日志工具报告滥用行为。该模块的工作原理是创建一个IP地址和URI的内部动态表，并拒绝以下任何一个IP地址：

- 每秒请求同一页多次
- 每秒对同一个孩子发出50多个并发请求
- 暂时列入黑名单时提出任何要求

如果满足上述任何条件，则发送403响应并记录IP地址。


#### HTTP 故障代码含义？

一些常见的状态代码:
```
200 服务器成功返回内容
301/2 永久/临时重定向
304 未修改 Not Modified
307 重定向中保留原始数据
404 请求的页面不存在
500 服务器内部错误
503 服务器暂时不可用
```

#### Nginx 出现 502 错误？

Nginx 的 502 错误全程为 “Nginx 502 Bad Gateway”。错误不在 Nngix 本身，而是 Nginx 转发的后端服务运行异常。  

后端服务异常包括：
* 计算资源不够
* 后端服务停止运行

#### 网站重定向错误导致打不开？

**原因分析**：死循环或重定向目标不存在   
**解决方案**：分析网站根目录下的 `.htaccess` 文件，看看有没有死循环规则  

#### 升级或安装扩展时网络超时？

在使用 WordPress, ownCloud 等应用时，可能出现在线升级等操作由于网络原因导致失败。  

常见网络超时场景：  

* 在线升级
* 应用市场安装插件
* 在应用提供商的平台上注册账号
* 程序中的 reCAPTCHA 验证
* Google 地图
* 程序代码中第三方资源（CSS/JS等）
* Docker pull 镜像
* yum / apt 升级

这些场景的根本原因都只有一个：而 *应用服务器 -- 应用提供商服务器* 受制于地域原因，可能会出现偶尔或持续网络不通的情况。  

一旦网络不通，那么以上场景所对应的服务自然无法访问，最后只能接受系统超时的结果。  

如何解决呢？

既然是网络不通导致，而我们又无法对应用提供商服务器的网络做出任何动作。显然，只有从应用或应用所在的服务器网络情况做出应对，才能探索合适的解决方案：

1. 修改应用中的代码，将网络不通的服务替换。例如：更换 Docker 仓库地址。
2. 临时修改应用自身的网络访问，让应用可以直接与应用提供商服务器连通。例如：在 WordPress 中安装代理插件，临时让 WordPress 访问国外的升级服务器。
3. 临时改变自身服务器的网络，使之与应用提供商服务器连通。例如：应用服务器中安装代理客户端，使应用服务器可以通过代理去访问国外升级服务器。

以上提出的方案基本包括涵盖全部场景，但详细操作需根据具体的应用而定。