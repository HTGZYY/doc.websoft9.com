---
sidebar_position: 2
slug: /phpstudy/admin
tags:
  - phpStudy
  - DevOps
---


# 维护参考

## 系统参数

本预装包包含 phpStudy 运行所需一序列支撑软件（简称为“组件”），下面列出主要组件名称、安装路径、配置文件地址、端口、版本等重要的信息。

Websoft9的镜像由运行环境、数据库和运维面板三个部分组成，以最新版本镜像为例包括：

| **项** | **路径或说明** |
| :--- | :--- |
| 操作系统 | Windows Server |
| 配置要求 | 最低配置建议1核1G |
| Web服务 | WAMP |
| 网站默认根目录 | C:\websoft9\phpStudy\PHPTutorial\WWW |
| PHP配置文件 | C:\websoft9\phpStudy\PHPTutorial\php\php-\*\php.ini  |
| PHP版本 | PHP5.2到PHP7.2可自由切换 |
| Apache虚拟主机文件--根目录对应的文件 |  C:\websoft9\phpStudy\PHPTutorial\Apache\conf\extra\httpd-vhosts.conf |
| Apache日志文件目录 | C:\websoft9\phpStudy\PHPTutorial\apache\logs | 
| Nginx虚拟主机文件--根目录对应的文件 | C:\websoft9\phpStudy\PHPTutorial\nginx\conf\vhosts.conf |
| Nginx日志文件目录 | C:\websoft9\phpStudy\PHPTutorial\nginx\logs |
| MySQL数据目录 | C:\websoft9\phpStudy\PHPTutorial\MySQL\data |
| MySQL配置文件 | C:\websoft9\phpStudy\PHPTutorial\MySQL\my.ini |
| phpMyAdmin目录 | C:\websoft9\phpStudy\PHPTutorial\WWW\phpMyAdmin |
| MySQL管理地址 | [http://服务器公网IP/phpmyadmin](http://服务器公网IP/phpmyadmin) |
| 9Panel访问地址 | [http://服务器公网IP/9panel](http://服务器公网IP/9panel) |

### 路径

### 证书


### 端口号

### 版本号

### 服务


## 备份

### 全局自动备份

所有的云平台都提供了全局自动备份功能，基本原理是基于**磁盘快照**：快照是针对于服务器的磁盘来说的，它可以记录磁盘在指定时间点的数据，将其全部备份起来，并可以实现一键恢复。

```
- 备份范围: 将操作系统、运行环境、数据库和应用程序
- 备份效果: 非常好
- 备份频率: 按小时、天、周备份均可
- 恢复方式: 云平台一键恢复
- 技能要求：非常容易
- 自动化：设置策略后全自动备份
```

不同云平台的自动备份方案有一定的差异，详情参考 [云平台备份方案](https://support.websoft9.com/docs/faq/zh/tech-instance.html)

### 程序手工备份

程序手工本地备份是通过**下载应用程序源码和导出数据库文件**实现最小化的备份方案。

下面以列表的方式介绍这种备份：
```
- 备份范围: 数据库和应用程序
- 备份效果: 一般
- 备份频率: 一周最低1次，备份保留30天
- 恢复方式: 重新导入
- 技能要求：非常容易
- 自动化：无
```


## 恢复


## 升级

### 系统级更新

## 故障处理

我们收集使用 phpStudy 过程中最常见的故障，供您参考：
> 服务器相关故障的诊断和解决，与云平台密切相关，请参考[云平台文档](https://support.websoft9.com/docs/faq/zh/tech-instance.html)

#### 网站打不开

1. Apache 或 MySQL 服务未启动
	解决方法：远程连接到服务器，检查 Apache 和 MySQL 的服务状态，可尝试重启服务来解决。

2. 安全组没有开放 80 端口
	解决方法：
    1. 腾讯云
    进入到云服务器的管理控制台，找到安全组设置，点击“修改规则”-&gt; “添加规则”，在“类型”下拉菜单中选择“HTTP”，然后点击“完成”即可添加 80 端口。
    2. 阿里云
    登录到云服务器管理控制台，打开菜单“安全组”，选择服务器所在的区域，打开“配置规则”，在“协议”的下拉菜单中选择“http”，“授权对象”一栏填入 0.0.0.0/0 ,确定即可。

#### 网站访问慢或不稳定

1. 服务器出口带宽不够用
	这种情况可以采取两种方法，一种就是直接增加服务器的带宽，第二种就是购买云服务商的CDN服务。这两种措施可有效的改善网站访问速度过慢的问题。
    
2. 服务器负载过大忙不过来
	这种情况可以考虑重启服务器尝试解决，如果依然存在就需要考虑提高服务器配置了。
    
3. 数据库的瓶颈，当数据库变得非常庞大，比如好几个G或上T了，那对于数据库的读写就会变得相当缓慢了，其次每次查询都需要对这么大的数据库进行全局查询，自然会很慢。

4. 日志文件过大，在实际应用中可能对日志没有进行有效的管理，导致日志文件不断积累，甚至占用了整个服务器剩余的的磁盘空间，这样也会导致 Web 服务不稳定。解决方法是进行日志文件的自动切割和定期清理。

#### 服务无法启动

1. 端口冲突
	一般，Apache默认端口为80，MySQL默认端口为3306；可以通过cmd控制台输入指令：netstat -ano，查看服务器端口的使用情况。
    解决方法：
    1. 找到 Apache 的配置文件（包括 httpd.conf 和站点配置文件），将端口 80 改为其他端口，如：81，然后重启 Apache。
    **注意：更改端口后，需要将安全组的对应端口开放出来，否则服务正常启动，但外网依然无法访问网站。**
    找到 MySQL 的配置文件 my.ini ，将其中的 port = 3306 改为其他端口，然后重启MySQL服务。
    2. 通过 netstat -ano 命令查看是哪个程序或服务占用了 80 或 3306 端口，可根据 PID 到任务管理器或服务列表将其关闭，再重新启动 Apache 和 MySQL。
2. 配置文件错误
	如果端口没有发生冲突，则最可能出错的就是配置文件中有错误，如：网站根目录写错，或者其中某些参数写错、有冲突等。
    解决方法：
    1. 在镜像安装之初，建议对配置文件（httpd.conf 、my.ini 、站点配置文件等）做备份以备不时之需；
    2. 对于阿里云的服务器，若服务器内无重要数据（或数据皆有本地备份），可在服务器控制台采取“初始化磁盘”的方式将镜像恢复到刚安装时的正常状态。
    3. 若没有任何备份，请联系长沙网久软件公司的客服寻求技术支持。
   

#### 数据库连不上

1. 密码或用户权限不对
	可能是用户名或密码输入不正确，或者该用户权限不够。
    解决方法：
    检查用户名和密码，尝试切换 root 用户登录，如果 root 密码也忘记了，请参考我们的**如何重置数据库 root 密码**章节。
2. 服务端可连接，客户端无法连接
	原因：为了安全起见 MySQL 数据库默认没有开启远程连接的权限，如需开启，请参考**如何开启MySQL远程连接**章节。

## 常见问题