---
sidebar_position: 1
slug: /mysql2
tags:
  - MySQL
  - MariaDB
  - Cloude Native Database
---


import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# 快速入门

[MySQL](https://www.mysql.com/products/community/) 是全球知名的关系型数据库管理系统，由瑞典 MySQL AB 公司开发，几经易手目前属于 Oracle 旗下产品。

![](https://libs.websoft9.com/Websoft9/DocsPicture/zh/mysql/mysql-dbgui-websoft9.png)

[MariaDB](https://mariadb.org/) 是一个在全球广受欢迎的关系型数据库系统。它由 MySQL 创始人 Michael Widenius 于2014年联合旧部在芬兰创立。MariaDB最初被设计为 MySQL 的增强，直接替代品，之所以被使用是因为它具有快速，可扩展和强大的功能，并具有丰富的存储引擎，插件和许多其他工具生态系统，因此对于各种用例都非常通用。

![](http://libs.websoft9.com/Websoft9/DocsPicture/zh/mariadb/mariadb-gui-websoft9.png)

## 准备

部署 Websoft9 提供的 MySQL/MariaDB 之后，需完成如下的准备工作：

1. 在云控制台获取您的 **服务器公网IP地址** 
2. 在云控制台安全组中，确保 **Inbound（入）规则** 下的 **TCP:3306,9090** 端口已经开启
3. 在服务器中查看 MySQL/MariaDB 的 **[默认账号和密码](./user/credentials)**  
4. 若想用域名访问  MySQL/MariaDB，务必先完成 **[域名五步设置](./administrator/domain_step)** 过程


## MySQL/MariaDB 初始化向导

### 详细步骤

部署 MySQL/MariaDB 之后，依次完成下面的步骤，验证其可用性

<Tabs>
<TabItem value="linuxwizard" label="Linux" default>

1. 使用 SSH 连接 MySQL/MariaDB 所在的服务器

2. 运行下面的命令，查看 MySQL/MariaDB 的安装信息和运行状态
    ```
    cd /data/apps/mysql && sudo docker compose ls
    ```
   MySQL 正常运行会得到 " STATUS: running(1)" 的反馈

3. 使用 root [账号密码](./user/credentials) 登录 MySQL/MariaDB 服务端
    ~~~
    #假设初始密码是：7j5vc0EttEUDtC!
    docker exec -it mariadb mysql -uroot -p7j5vc0EttEUDtC!
    ~~~

    登录成功会显示如下信息：

    ![](http://libs.websoft9.com/Websoft9/DocsPicture/en/mysql/mysql_command.png)

4. 使用 MySQL 可视化管理工具 [phpMyAdmin](#phpmyadmin) 验证


</TabItem>

<TabItem value="winwizard" label="Windows">

1. 远程桌面登录到 Windows-CMD 窗口，运行下面的命令
    ~~~
    #假设初始密码是：123456
    mysql -uroot –p123456
    ~~~
2. 使用服务器桌面上的 

</TabItem>
</Tabs>


### 出现问题？

若碰到问题，请第一时刻联系 **[技术支持](./helpdesk)**。也可以先参考下面列出的问题定位或  **[FAQ](./faq#setup)** 尝试快速解决问题。


## MySQL/MariaDB 常用操作


### 密码管理

- 修改密码，即使用已有密码登录 MySQL，然后修改成另外一个密码。  
- 重置密码，即忘记了密码，需要通过重置密码找回

##### 修改密码{#modifypw}

可以通过 MySQL 管理工具修改密码，也通过命令上修改密码

##### phpMyAdmin修改密码

![](http://libs.websoft9.com/Websoft9/DocsPicture/zh/mysql/websoft9-modifymysqlpw.gif)

##### 命令行修改密码

执行一下命令:
```
docker exec -it mysql mysqladmin -u 用户名 -p 旧密码 password '新密码' 
```

##### 重置密码{#resetpw}

如果忘记了 root 密码，就需要通过命令操作，实现MySQL密码重置。我们提供了一个重置密码的脚本：

1. 使用SSH远程连接到 MySQL 服务器，进入容器
   ```
   docker exec -it mysql bash
   ```
   
2. 运行如下命令，按提示输入新密码即可。
   ```
   wget -N https://ghproxy.com/https://raw.githubusercontent.com/websoft9dev/role_mysql/master/tools/reset_password.sh; bash reset_password.sh
   ```



### 更换 MySQL 数据目录

修改 MySQL 数据目录，按以下步骤操作：

1. 修改[MySQL compose 文件](#path)中数据挂载目录
   ```shell
   version: '3.8'
   services:
    mariadb:
      image: $APP_REPO:$APP_VERSION
      container_name: $APP_NAME
      restart: always
      environment:
        - MARIADB_ROOT_PASSWORD=$APP_PASSWORD
      ports:
        - $APP_PORT:3306
      command: --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
      volumes:
        - ./src/newdata:/var/lib/mysql
   ```
2. 重新创建 MySQL 容器，数据文件在设置的目录已经生成
   ```shell
   cd /data/apps/mysql && sudo docker compose up -d
   ```

### 设置 Binary Log

MySQL默认没有开启 Binary Log，修改 [MySQL 配置文件](#path)相关项

```
log_bin = mysql-bin      # enable Binary log
binlog_format = mixed    # Binary log format
expire_logs_days = 7     # Binary log expire time
```

如果您的二进制日志文件太大，建议将 expire_logs_day 更改为更小，定时清理日志文件。

### 图形化客户端

使用 MySQL 官方的 [Workbench](https://www.mysql.com/products/workbench/) 或 [第三方客户端工具](./tools#dbclient)在本地管理数据库。

###  图形化 Web 端（phpMyAdmin）{#phpmyadmin}

[phpMyAdmin](https://www.phpmyadmin.net/) 是很受欢迎的 MySQL 数据库管理工具，下面介绍常见的 phpMyAdmin 操作



## MySQL/MariaDB 参数

MySQL 应用中包含 Docker, phpMyAdmin 等组件，可通过 **[通用参数表](./administrator/parameter)** 查看路径、服务、端口等参数。

通过运行`docker ps`，可以查看到 MySQL 运行时所有的 Container：

```bash
CONTAINER ID   IMAGE               COMMAND                  CREATED          STATUS          PORTS                                       NAMES
4c7eb560231d   phpmyadmin:latest   "/docker-entrypoint.…"   10 minutes ago   Up 10 minutes   0.0.0.0:9090->80/tcp, :::9090->80/tcp       phpmyadmin
d5c4ba36ce50   mariadb:10.8        "docker-entrypoint.s…"   10 minutes ago   Up 10 minutes   0.0.0.0:3306->3306/tcp, :::3306->3306/tcp   mariadb

```

下面仅列出 MySQL 本身的参数：

### 路径{#path}
<Tabs>
<TabItem value="linuxpath" label="Linux" default>

MySQL 安装目录: */data/apps/mysql*    
MySQL 数据目录：*/data/apps/mysql/data/mysql_data*   
MySQL 配置文件: */data/apps/mysql/src/conf.d/mysql.cnf*  
MySQL compose 文件: */data/apps/mysql/docker-compose.yml*  

MariaDB 安装目录: */data/apps/mariadb*  
MariaDB 数据目录: */data/apps/mariadb/data/mariadb_data*  
MariaDB 配置文件: */data/apps/mariadb/src/conf.d/mysql.cnf*  
MariaDB compose 文件: */data/apps/mariadb/docker-compose.yml*  

phpMyAdmin 安装路径: */data/apps/phpmyadmin*  
phpMyAdmin 配置文件: */data/apps/phpmyadmin/src/config.user.inc.php*      
phpMyAdmin compose 文件: */data/apps/phpmyadmin/docker-compose.yml*  

</TabItem>
<TabItem value="winpath" label="Windows">

* 目录：C:/websoft9/mysql
* 配置文件：C:/websoft9/mysql/etc/my.ini
* 数据文件目录:：C:/websoft9/mysql/data

</TabItem>
</Tabs>

### 端口

| 端口号 | 用途                                          | 必要性 |
| ------ | --------------------------------------------- | ------ |
| 3306   | MySQL/MariaDB 远程端口 | 可选   |
| 9090   | HTTP 访问 phpMyAdmin on Docker | 可选   |

### 版本

```shell
docker exec -it mysql mysql -V
```

### 服务

<Tabs>
<TabItem value="linuxservice" label="Linux" default>

```shell
sudo docker start | stop | restart | stats phpmyadmin
sudo docker start | stop | restart | stats mysql
```

</TabItem>
  <TabItem value="winservice" label="Windows">

采用操作系统的服务管理功能，来实现 MySQL 的启动、停止和重启操作  

![](https://libs.websoft9.com/Websoft9/DocsPicture/zh/mysql/mysql-servicewin-websoft9.png)

  </TabItem>
</Tabs>


